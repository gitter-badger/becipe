@(recipe: Recipe, relatedRecipes: Seq[Recipe])(implicit request: RequestHeader, session: play.api.mvc.Session)

@import play.api.libs.json._

@getWordFor(i: Int) = {
	@{i match {
		case 0 => {"first"}
		case 1 => {"second"}
		case 2 => {"third"}
		case _ => {"last"}
	}}
	
}

@isSaved() = @{
	false
}

@isMyRecipe() = @{
	false
}

@main("recipe-book") {

<body>

	<!-- MAIN -->
	<div id="main_recipe">
		
		
		<div class="row-fluid">
			<div class="span12 navbar-fixed-top">
				<!-- slider -->
				<div class="center-in-span main-content-width">
					<div class="flexslider">
						<ul class="slides">
							@for(photo <- recipe.photos){
								@if(photo.metadata.typeOf == "slider") {
									<li>
										<img class="slider-picture" src="@photo.getFullUrl" alt="alt text" />
									</li>	
								}
							}
						</ul>
					</div>
				</div>
				<!-- ENDS slider -->
			</div>
		</div>
		
		
		<div class="row-fluid next-to-fixed">
			<div class="span12">
				<div class="center-in-span main-content-width" style="background-color: #cdcdcd">
					@for(tag <- recipe.tags) {
						<span>@tag&nbsp;</span>
					}
				</div>	
			</div>
		</div>
		
		<div class="row-fluid">
			<div class="span12">
				<div class="center-in-span main-content-width" style="background-color: #cdcdcd">
					<div class="row-fluid">
						<div class="span6"><h2 class="heading">@recipe.name</h2></div>
						<div class="span3">
							<img style="margin-top: 10px" src="@routes.Assets.at("img/ratings.png")" alt="rating">
						</div>
						<div class="span3">
							<img style="margin-top: 10px;margin-left: 10px" class="float-right" src="@routes.Assets.at("img/fav1.png.bck")" alt="user profile photo">
							<p style="text-align: right;margin-top: 10px"><strong>Posted By </strong> @recipe.by</p>
							<p style="text-align: right">@org.joda.time.format.DateTimeFormat.forPattern("dd-MMMM-YYYY").print(recipe.created)</p>
						</div>
					</div>
					<div class="row-fluid">	
						<div class="span12">
							<!-- social bar -->
							<div id="social-bar-container" class="float-right">
								<ul id="social-bar-right" class="cf sb">
									@views.html.social_bar()
								</ul>
							</div>
							<!-- end of social bar -->
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class="row-fluid">
			<div class="span12">
				<div class="center-in-span main-content-width">
					<div class="row-fluid">
						<div class="span4">
							<p><strong><i>Preparation Time </i></strong> @recipe.prepTime </p> 	
						</div>
						<div class="span4">
							<p><strong><i>Recipe yield</i></strong> @recipe.recipeYield </p>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class="row-fluid">
			<div class="span12">
				<div class="center-in-span main-content-width">
						<!-- Ingredients -->
						<h3>Ingredients</h3>
						<div class="row-fluid">
							@for(i <- 0 to recipe.phases.length - 1) {
								<div class="span4">
									<h4>Phase @{i+1}: @recipe.phases(i).description</h4>
									@for(ing <- recipe.phases(i).ingredients) {
										<div>@ing</div>
									}
								</div>
							}
						</div>
						<!-- End of Ingredients -->
						
						<!-- Directions -->
						<h3>Directions</h3>
						<div class="row-fluid">
							<div class="span12 directions">
								@Html(recipe.directions)
							</div>
						</div>
						<!-- End of Directions -->
				</div>	
			</div>
		</div>

	</div>
	<!-- ENDS MAIN -->
</body>
<script>

	function setMargins() {
		var secondFixedHeight = $(".slider-picture").first().height();
		var height = $(".navbar-fixed-top:eq(0)").height();
	  	var margin = height+20;
	  	var secondFixed = $(".navbar-fixed-top:eq(1)");
	  	
	  	if($(".navbar-fixed-top:eq(0)").css('position')=='fixed') {
			$(secondFixed).css("margin-top",""+margin+"px");
	    	$(".next-to-fixed").css("margin-top",""+(margin+secondFixedHeight+40)+"px");
		} else {
			$(secondFixed).css("margin-top","10px");
	    	$(".next-to-fixed").css("margin-top","10px");
		}
	}

	$(function() {
		 $('.flexslider').flexslider({
    		animation: "slide",
    		start: function() {
            	setMargins();
        	}
  		});
  		$(window).resize(function() {
		 	setMargins();
		});
		//$('.slider-picture:eq(0)').load(function() {
  		//	setMargins();	
		//});
	});
</script>
}