@()(implicit request: RequestHeader)

@main("signup") {

<body class="signup-container">
	
	<!-- MAIN -->
	<div id="main">
		
		<!-- signup form -->
		<div class="row-fluid">
			<div class="span12">
				<div class="center-in-span signup-form-width signup-form signup-form-container">
					<div class="row-fluid">
						<form name="form" method="POST" action="@routes.Application.signup()">
					        <div class="span12" id="title">We're busy mixing something beautiful here at <span style="color: #b22e00;font-weight: bold;font-size: 24px">Becipe</span> and can't wait to share it with you. Enter your name and email to request early access and get updates about all the gorgeous ways we're going to change the DIY homemade skin care industry.</div>
					        <input class="span6" data="First Name" type="text" value="First Name" name="fn" id="fn" class="empty">
					        <input class="span6" data="Last Name" type="text" value="Last Name" name="ln" id="ln" class="empty">
					        <input class="span12" data="Email" type="text" value="Email" name="em" id="em" class="empty">
					        <div class="center-in-span">
					        	<button type="submit" id="signup" class="">Request</button>
					        </div>
			    		</form>	
			    	</div>
			    	<div class="row-fluid">
			    		<div id="footer">
							<div class="float-left text">
							You can also send us feedback to
							<a href="mailto:info@@becipe.com" style="color: #fff;font-weight: bold">info@@becipe.com</a>
							or join us on
							</div> 
								<!-- social bar -->
								<div id="social-bar-container" class="float-left">
									<ul id="social-menu" class="signup">
										@views.html.social_menu()
									</ul>
								</div>
								<!-- end of social bar -->	
						</div>
			    	</div>
				</div>	
			</div>
		</div><!-- end signup form -->
		
	</div><!-- ENDS MAIN -->
</body>
}


<script type="text/javascript">
	
function validateEmail(email)
{
    var splitted = email.match("^(.+)@@(.+)$");
    if (splitted == null) return false;
    if (splitted[1] != null)
    {
        var regexp_user = /^\"?[\w-_\.]*\"?$/;
        if (splitted[1].match(regexp_user) == null) return false;
    }
    if (splitted[2] != null)
    {
        var regexp_domain = /^[\w-\.]*\.[A-Za-z]{2,4}$/;
        if (splitted[2].match(regexp_domain) == null)
        {
            var regexp_ip = /^\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\]$/;
            if (splitted[2].match(regexp_ip) == null) return false;
        } 
        return true;
    }
    return false;
}

function onFocus() {
	$(this).removeClass("error"); $(this).removeClass("empty");
	var val = $(this).val();  
	var waterMark = $(this).attr("data");
	if (val == waterMark || val == "") { $(this).val(''); } 	  
}
	
function onBlur(waterMark) {
	$(this).removeClass("error");
	var val = $(this).val();  
	var waterMark = $(this).attr("data");
	if (val == "") { $(this).val(waterMark); $(this).addClass("empty"); } 	  
}

function isValid(el, waterMark) {
	var val = $(el).val(); 
	var valParts = /^(?!\s*$).+/.exec(val);
	var isValid = (valParts!=null && val!=waterMark);
	if(isValid && waterMark=="Email") {
		isValid = validateEmail(val);
	}
    return isValid;	
}


$(function() { 
	
	$("#fn").on('focus', onFocus);
	$("#ln").on('focus', onFocus);
	$("#em").on('focus', onFocus);
	$("#fn").on('blur', onBlur);
	$("#ln").on('blur', onBlur);
	$("#em").on('blur', onBlur);
	 
  	$("#signup").click(function() {  
    	 
		var validated = true;
		
		$(this).closest('form').find('input').each(function() {
		
			if(!isValid(this, $(this).attr("data"))) {
				validated = false;
				$(this).addClass("error");
			} else {
				$(this).removeClass("error");
			}		
		});
		
		if(!validated) {
			return false;
		}
		
		$(this).closest('form').submit();
		
		return false;  
	});
		
});
</script>

